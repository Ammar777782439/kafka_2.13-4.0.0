ุจุงูุชุฃููุฏุ ููุฏ ููุช ุจุฅุนุงุฏุฉ ุชุฑุชูุจ ูุชูุธูู ุงูุฏููู ููููู ุฏูููุงู ูุชูุงููุงู ููุฑุชุจุงู ุฎุทูุฉ ุจุฎุทูุฉ ูุดุฎุต ูููู ุจุชุดุบูู ุจูุฆุฉ ูุงููุง ูุฐู ูุฃูู ูุฑุฉ ุนูู ุฌูุงุฒู.

-----

## ๐ ุฏููู ุงูุชุดุบูู ุฎุทูุฉ ุจุฎุทูุฉ ูุฅุนุฏุงุฏ Kafka ูุฃูู ูุฑุฉ

ูุฑุญุจุงู ุจู\! ูุฐุง ุงูุฏููู ุณูุฃุฎุฐู ูู ุฑุญูุฉ ุฅุนุฏุงุฏ ูุชุดุบูู ููุงุณุชุฑ ูุงููุง ูุคูููู ุจุงููุงูู ุจุงุณุชุฎุฏุงู ููุท KRaft (ุจุฏูู ZooKeeper). ุฌููุน ูููุงุช ุงูุฅุนุฏุงุฏ ูุงูุณูุฑุจุชุงุช ุงููุงุฒูุฉ ููุฌูุฏุฉ ูุฌุงูุฒุฉ. ุงุชุจุน ุงูุฎุทูุงุช ุงูุชุงููุฉ ุจุงูุชุฑุชูุจ.
ูุงุฒู ุชููู ูุฌูุฏ kafka ุงูู /opt/kafka ูู ุงุฌู ุชูุงุฏู ุงูุงุฎุทุงุก
### **ุงูุฎุทูุฉ 1: ุชูููุฏ ุดูุงุฏุงุช ุงูุฃูุงู (SSL Certificates)** ๐ก๏ธ

ูุฐู ูู ุงูุฎุทูุฉ ุงูุฃููู ูุงูุฃุณุงุณูุฉ ูุชุฃููู ุฌููุน ุงูุงุชุตุงูุงุช ุฏุงุฎู ุงูููุงุณุชุฑ ููุน ุงูุนููุงุก.

1.  ุงูุชุญ ูุงูุฐุฉ ุงูุฃูุงูุฑ (Terminal).
2.  ุงูุชูู ุฅูู ูุฌูุฏ ุงูุฅุนุฏุงุฏุงุช:
    ```bash
    cd /opt/kafka/config/kraft
    ```
3.  ูู ุจุชุดุบูู ุณูุฑุจุช ุชูููุฏ ุงูุดูุงุฏุงุช:
    ```bash
    ./certfcat.sh
    ```
    ุณูููู ูุฐุง ุงูุณูุฑุจุช ุจุฅูุดุงุก ูุฌูุฏ `ssl/` ุฌุฏูุฏ ูุญุชูู ุนูู ุฌููุน ุงูุดูุงุฏุงุช ูุงูููุงุชูุญ ุงููุงุฒูุฉ ููุฎูุงุฏู ูุงูุนููุงุก.

-----

### **ุงูุฎุทูุฉ 2: ุชููุฆุฉ ุงูููุงุณุชุฑ ูุฃูู ูุฑุฉ (One-Time Setup)** โ๏ธ

ูุฐู ุงูุนูููุฉ ุชูููุฐ ูุฑุฉ ูุงุญุฏุฉ ููุท ุนูุฏ ุฅูุดุงุก ุงูููุงุณุชุฑ ูุชููุฆุฉ ูุณุงุญุงุช ุงูุชุฎุฒูู ุงูุฎุงุตุฉ ุจู KRaft.

1.  **ุชูููุฏ ูุนุฑูู ูุฑูุฏ ููููุงุณุชุฑ (Cluster ID):**

    ```bash
    CLUSTER_ID=$(bin/kafka-storage.sh random-uuid)
    echo "Cluster ID: $CLUSTER_ID"
    ```

    ุงุญุชูุธ ุจูุฐุง ุงููุนุฑููุ ุณุชุญุชุงุฌู ูู ุงูููุทุฉ ุงูุชุงููุฉ.

2.  **ุชููุฆุฉ ูุฌูุฏุงุช ุงูุชุฎุฒูู (Format Storage):**
    ุงุณุชุฎุฏู ุงููุนุฑูู ุงูุฐู ุฃูุดุฃุชู ูุชููุฆุฉ ูู ุฎุงุฏู ูู ุงูููุงุณุชุฑ.

    ```bash
    # ุชููุฆุฉ ุงูุฎุงุฏู ุงูุฃูู
    bin/kafka-storage.sh format -t $CLUSTER_ID -c config/kraft/server-0.properties

    # ุชููุฆุฉ ุงูุฎุงุฏู ุงูุซุงูู
    bin/kafka-storage.sh format -t $CLUSTER_ID -c config/kraft/server-1.properties

    # ุชููุฆุฉ ุงูุฎุงุฏู ุงูุซุงูุซ
    bin/kafka-storage.sh format -t $CLUSTER_ID -c config/kraft/server-2.properties
    ```

-----

### **ุงูุฎุทูุฉ 3: ุชุดุบูู ุฎูุงุฏู ูุงููุง (Start Kafka Servers)** ๐

ุฃูุช ุงูุขู ุฌุงูุฒ ูุจุฏุก ุชุดุบูู ุงูููุงุณุชุฑ.

1.  **ุชุตุฏูุฑ ูุชุบูุฑ ุงูุจูุฆุฉ ุงูุฎุงุต ุจุงููุตุงุฏูุฉ (JAAS):** ูุฐุง ุงููุชุบูุฑ ูุฎุจุฑ ูุงููุง ุจููุงู ููู ุฃุณูุงุก ุงููุณุชุฎุฏููู ููููุงุช ุงููุฑูุฑ.
    ```bash
    export KAFKA_OPTS="-Djava.security.auth.login.config=config/kraft/kafka_server_jaas.conf"
    ```
2.  **ุชุดุบูู ุงูุฎูุงุฏู:** ูุฏูู ุทุฑููุชุงู:
      * **ุงูุทุฑููุฉ ุงูุณููุฉ (ููุตู ุจูุง):** ุจุงุณุชุฎุฏุงู ุณูุฑุจุช ุงูุฅุฏุงุฑุฉ ุงููุฑูู.
        ```bash
        bin/kafka-manager start
        ```
      * **ุงูุทุฑููุฉ ุงููุฏููุฉ:**
        ```bash
        bin/kafka-server-start.sh -daemon config/kraft/server-0.properties
        bin/kafka-server-start.sh -daemon config/kraft/server-1.properties
        bin/kafka-server-start.sh -daemon config/kraft/server-2.properties
        ```
    **ูุตูุญุฉ:** ููููู ุงุณุชุฎุฏุงู ุงูุฃูุฑ `bin/kafka-manager status` ููุชุฃูุฏ ูู ุฃู ุฌููุน ุงูุฎูุงุฏู ุชุนูู ุจูุฌุงุญ.

-----

### **ุงูุฎุทูุฉ 4: ุฅูุดุงุก ููุถูุน ูุชุนููู ุงูุตูุงุญูุงุช (Topics & ACLs)** ๐

ุงูุขู ุจุนุฏ ุฃู ุฃุตุจุญ ุงูููุงุณุชุฑ ูุนููุ ุณูููู ุจุฅูุดุงุก ููุถูุน (Topic) ูุชุญุฏูุฏ ูู ููููู ุงุณุชุฎุฏุงูู. ุณูุณุชุฎุฏู ุญุณุงุจ **ุงููุฏูุฑ (`admin`)** ููููุงู ุจูุฐู ุงูููุงู ุงูุฅุฏุงุฑูุฉ.

1.  **ุฅูุดุงุก ููุถูุน ุฌุฏูุฏ:**

    ```bash
    bin/kafka-topics.sh --create --topic secure-topic --partitions 1 --replication-factor 2 --bootstrap-server 192.168.168.44:9094 --command-config config/kraft/admin-sasl-ssl.properties
    ```

2.  **ููุญ ุตูุงุญูุงุช ุงููุตูู ูููุณุชุฎุฏู `user2_bajash`:**
    ุณูููุญ ูุฐุง ุงููุณุชุฎุฏู ุตูุงุญูุฉ ุงููุชุงุจุฉ (`WRITE`) ูุงููุฑุงุกุฉ (`READ`) ุนูู ุงูููุถูุน ุงูุฐู ุฃูุดุฃูุงู.

    ```bash
    bin/kafka-acls.sh --bootstrap-server 192.168.168.44:9094 --command-config config/kraft/admin-sasl-ssl.properties --add --allow-principal User:user2_bajash --operation WRITE --operation READ --topic secure-topic
    ```

-----

### **ุงูุฎุทูุฉ 5: ุงุฎุชุจุงุฑ ุงูุฅูุชุงุฌ ูุงูุงุณุชููุงู (Test the Setup)** โ

ูุฐู ูู ูุญุธุฉ ุงูุญูููุฉ\! ุณูุชุญูู ูู ุฃู ุงููุณุชุฎุฏู `user2_bajash` ููููู ุฅุฑุณุงู ูุงุณุชูุจุงู ุงูุฑุณุงุฆู ุจุงุณุชุฎุฏุงู ุงูุตูุงุญูุงุช ุงูุชู ูููุญุช ูู.

1.  **ุฅุฑุณุงู ุงูุฑุณุงุฆู (Producer):**
    ุงูุชุญ ูุงูุฐุฉ ุฃูุงูุฑ ุฌุฏูุฏุฉ ููู ุจุชุดุบูู ุงูุฃูุฑ ุงูุชุงูู. ุณูุณูุญ ูู ุจูุชุงุจุฉ ุฑุณุงุฆู ูุจุงุดุฑุฉ ูู ุณุทุฑ ุงูุฃูุงูุฑ.

    ```bash
    # ุงุณุชุฎุฏู ููู ุฅุนุฏุงุฏุงุช ุงูุนููู ุงูุนุงุฏู client-ssl.properties
    bin/kafka-console-producer.sh --broker-list 192.168.168.44:9094 --topic secure-topic --producer.config config/kraft/client-ssl.properties
    ```

    ุงูุชุจ ุจุนุถ ุงูุฑุณุงุฆู ูุซู "Hello Kafka" ูุงุถุบุท Enter. ุงุถุบุท `Ctrl+C` ููุฎุฑูุฌ ุนูุฏ ุงูุงูุชูุงุก.

2.  **ุงุณุชูุจุงู ุงูุฑุณุงุฆู (Consumer):**
    ุงูุชุญ ูุงูุฐุฉ ุฃูุงูุฑ **ุซุงูุซุฉ** ููู ุจุชุดุบูู ุฃูุฑ ุงููุณุชููู.

    ```bash
    # ุงุณุชุฎุฏู ููุณ ููู ุฅุนุฏุงุฏุงุช ุงูุนููู
    bin/kafka-console-consumer.sh --bootstrap-server 192.168.168.44:9094 --topic secure-topic --from-beginning --consumer.config config/kraft/client-ssl.properties
    ```

    ุฅุฐุง ุธูุฑุช ุงูุฑุณุงุฆู ุงูุชู ุฃุฑุณูุชูุง ูู ูุงูุฐุฉ ุงููุณุชูููุ ููุฐุง ูุนูู ุฃู ุงูููุงุณุชุฑ ูุนูู ุจุดูู ูุซุงูู ูุน ูุธุงู ุงูุฃูุงู ูุงูุตูุงุญูุงุช. **ุชูุงูููุง\!** ๐

-----

### **ุฃูุงูุฑ ุฅุถุงููุฉ ููุฅุฏุงุฑุฉ**
**ููุงุญุธุฉ ูุงูุฉ:** ุฌููุน ุงูุฃูุงูุฑ ุงูุชุงููุฉ ูู ุฃูุงูุฑ ุฅุฏุงุฑูุฉุ ูุฐุง ูุฌุจ ุชูููุฐูุง ุจุงุณุชุฎุฏุงู ููู ุตูุงุญูุงุช ุงููุฏูุฑ (`admin-sasl-ssl.properties`).
  * **ูุฅููุงู ุฌููุน ุงูุฎูุงุฏู:**
    ```bash
    bin/kafka-manager stop
    ```
  * **ูุนุฑุถ ุฌููุน ุงูููุงุถูุน:**
    ```bash
    bin/kafka-topics.sh --list --bootstrap-server 192.168.168.44:9094 --command-config config/kraft/admin-sasl-ssl.properties
    ```
  * **ูุนุฑุถ ุงูุตูุงุญูุงุช ุนูู ููุถูุน ูุนูู:**
    ```bash
    bin/kafka-acls.sh --bootstrap-server 192.168.168.44:9094 --command-config config/kraft/admin-sasl-ssl.properties --list --topic secure-topic
    ```


   



-----

### ๐๏ธ **ุฅุฏุงุฑุฉ ุงูููุงุถูุน (Topic Management)**

ูุฐู ูู ุงูููุงู ุงูุฃูุซุฑ ุดููุนูุง ุงูุชู ุณุชููู ุจูุง.

  * **ูุตู ููุถูุน (Describe a Topic):**

      * ููุนุฑูุฉ ุชูุงุตูู ููุถูุน ูุนููุ ูุซู ุนุฏุฏ ุงูุฃูุณุงูุ ููู ูู ุงููุงุฆุฏ (Leader) ููู ูุณูุ ูุงููุณุฎ ุงููุชุฒุงููุฉ (ISR). ูุฐุง ุงูุฃูุฑ ุญููู ูุชุดุฎูุต ุงููุดุงูู.

    <!-- end list -->

    ```bash
    bin/kafka-topics.sh --describe --topic secure-topic --bootstrap-server 192.168.168.44:9094 --command-config config/kraft/admin-sasl-ssl.properties
    ```

      * **ูุงุฐุง ุชุจุญุซ ุนููุ** ุชุฃูุฏ ูู ุฃู ุนุฏุฏ ุงููุณุฎ ูู `Replicas` ูุณุงูู ุนุฏุฏ ุงููุณุฎ ูู `Isr`. ุฅุฐุง ูุงูุง ุบูุฑ ูุชุณุงููููุ ููุฐุง ูุนูู ุฃู ุฃุญุฏ ุงูุจุฑููุฑุงุช ุบูุฑ ูุชุฒุงูู.

  * **ุชุนุฏูู ููุถูุน (Alter a Topic):**

      * ูุฒูุงุฏุฉ ุนุฏุฏ ุงูุฃูุณุงู (Partitions) ูููุถูุน ููุฌูุฏ. ูุง ููููู ุชูููู ุนุฏุฏ ุงูุฃูุณุงู.

    <!-- end list -->

    ```bash
    # ุฒูุงุฏุฉ ุนุฏุฏ ุฃูุณุงู ุงูููุถูุน secure-topic ุฅูู 3
    bin/kafka-topics.sh --alter --topic secure-topic --partitions 3 --bootstrap-server 192.168.168.44:9094 --command-config config/kraft/admin-sasl-ssl.properties
    ```

  * **ุญุฐู ููุถูุน (Delete a Topic):**

      * **ุชุญุฐูุฑ:** ูุฐุง ุงูุฅุฌุฑุงุก ูุญุฐู ุงูููุถูุน ูุฌููุน ุจูุงูุงุชู ุจุดูู ุฏุงุฆู.

    <!-- end list -->

    ```bash
    bin/kafka-topics.sh --delete --topic secure-topic --bootstrap-server 192.168.168.44:9094 --command-config config/kraft/admin-sasl-ssl.properties
    ```

      * **ุดุฑุท:** ูุฌุจ ุฃู ุชููู ูููุฉ `delete.topic.enable=true` ููุนูุฉ ูู ุฅุนุฏุงุฏุงุช ุงูุจุฑููุฑุงุช (ููู ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ).

-----

### ๐ **ุฅุฏุงุฑุฉ ุตูุงุญูุงุช ุงููุตูู (ACL Management)**

  * **ุฅุฒุงูุฉ ุตูุงุญูุฉ (Remove an ACL):**
      * ูุฅูุบุงุก ุตูุงุญูุฉ ูุนููุฉ ูู ูุณุชุฎุฏู.
    <!-- end list -->
    ```bash
    # ุฅุฒุงูุฉ ุตูุงุญูุฉ ุงููุชุงุจุฉ WRITE ูู ุงููุณุชุฎุฏู user2_bajash ุนูู ุงูููุถูุน secure-topic
    bin/kafka-acls.sh --bootstrap-server 192.168.168.44:9094 --command-config config/kraft/admin-sasl-ssl.properties --remove --allow-principal User:user2_bajash --operation WRITE --topic secure-topic
    ```

-----

### ๐ฅ **ุฅุฏุงุฑุฉ ูุฌููุนุงุช ุงููุณุชููููู (Consumer Group Management)**

ูุฐู ุงูุฃูุงูุฑ ุถุฑูุฑูุฉ ููุฑุงูุจุฉ ุฃุฏุงุก ุชุทุจููุงุช ุงููุณุชููููู.

  * **ุนุฑุถ ุฌููุน ูุฌููุนุงุช ุงููุณุชููููู (List Consumer Groups):**

    ```bash
    bin/kafka-consumer-groups.sh --list --bootstrap-server 192.168.168.44:9094 --command-config config/kraft/admin-sasl-ssl.properties
    ```

  * **ูุตู ูุฌููุนุฉ ูุณุชููููู (Describe a Consumer Group):**

      * **ุงูุฃูุฑ ุงูุฃูู ููุฑุงูุจุฉ ุงููุณุชููููู.** ูุนุฑุถ ูู ุญุงูุฉ ูู ูุณู ููุฑุฃ ููู ุงููุณุชูููุ ูุฃูู ูุนูููุฉ ูู **ุงูุชุฃุฎูุฑ (LAG)**.

    <!-- end list -->

    ```bash
    bin/kafka-consumer-groups.sh --describe --group my-consumer-group --bootstrap-server 192.168.168.44:9094 --command-config config/kraft/admin-sasl-ssl.properties
    ```

      * **ูุงุฐุง ุชุจุญุซ ุนููุ** ุงูุธุฑ ุฅูู ุนููุฏ **`LAG`**. ุฅุฐุง ูุงูุช ูููุชู ุตูุฑูุง ุฃู ูุฑูุจุฉ ูู ุงูุตูุฑุ ููุฐุง ูุนูู ุฃู ุงููุณุชููู ููุงูุจ ุงูููุชุฌ. ุฅุฐุง ูุงูุช ุงููููุฉ ูุจูุฑุฉ ุฃู ุชุฒุฏุงุฏ ุจุงุณุชูุฑุงุฑุ ููุฐุง ูุฏู ุนูู ูุฌูุฏ ูุดููุฉ ูู ุชุทุจูู ุงููุณุชููู (ุจุทูุก ุฌุฏูุง ุฃู ูุชููู).

-----

### โค๏ธโ๐ฉน **ูุฑุงูุจุฉ ุตุญุฉ ุงูููุงุณุชุฑ (Cluster Health)**

  * **ูุตู ุงูููุงุณุชุฑ (Describe the Cluster):**

      * ููุญุตูู ุนูู ูุธุฑุฉ ุนุงูุฉ ุนูู ุงูููุงุณุชุฑุ ุจูุง ูู ุฐูู ุงูุจุฑููุฑุงุช ุงููุดุทุฉ ููุนุฑูู ุงูููุชุฑููุฑ ุงููุงุฆุฏ.

    <!-- end list -->

    ```bash
    bin/kafka-cluster.sh describe --bootstrap-server 192.168.168.44:9094 --command-config config/kraft/admin-sasl-ssl.properties
    ```

  * **ูุญุต ููุงุฑูู ุงูููุชุฑููุฑ (Check KRaft Quorum):**

      * ูุฐุง ุงูุฃูุฑ ุฎุงุต ุจูุถุน KRaftุ ููู ููู ุฌุฏูุง ูุชุดุฎูุต ูุดุงูู ุงูููุชุฑููุฑ.

    <!-- end list -->

    ```bash
    bin/kafka-metadata-quorum.sh --bootstrap-server 192.168.168.44:9094 --command-config config/kraft/admin-sasl-ssl.properties describe --status
    ```

      * **ูุงุฐุง ุชุจุญุซ ุนููุ** ุชุฃูุฏ ูู ูุฌูุฏ ูุงุฆุฏ (`Leader`) ูุงุญุฏ ูุฃู ุฌููุน ุงูุนูุฏ ุงูุฃุฎุฑู ุชุธูุฑ ูู `Follower`.
